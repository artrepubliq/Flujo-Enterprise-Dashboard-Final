<ng4-loading-spinner></ng4-loading-spinner>
<ngx-alerts maxMessages="3" timeout="5000"></ngx-alerts>
<div class="card_pb">
  <div class="report_area_block" fxLayoutAlign="center center">
    <div class="profile_header">
      <h3 class="header_title">area Category</h3>
      <div>
        <i class="fa fa-pencil" fxLayout="column" fxLayoutAlign="start end" *ngIf="updateArea" aria-hidden="true" (click)="updateAreaData()"></i>
      </div>

      <div *ngIf="selectArea" fxLayout="column" fxLayoutAlign="space-around center">
        <mat-form-field>
          <mat-select placeholder="Select area" [(ngModel)]="selectedValue" name="area" (ngModelChange)="onChangeArea($event)">
            <mat-option [value]=''>NONE</mat-option>
            <mat-option *ngFor="let area of areaData" [value]="{reportarea_id:area.id, area:area.area, pincode: area.pincode}">
              {{area.area}}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Area Pincode" disabled [value]="areaPincode">
        </mat-form-field>
      </div>
      <div>
        <button mat-button *ngIf="newAreaBtn" (click)="createNewBtn()">Create new</button>
      </div>
      <form [formGroup]="areaForm">
        <div>
          <div fxLayout="column" fxLayoutAlign="space-around center">
            <mat-form-field *ngIf="isEdit" class="">
              <input matInput placeholder="Area name" formControlName="areaname" [(ngModel)]="areaName">
            </mat-form-field>
            <mat-form-field *ngIf="isEdit" class="">
              <input matInput placeholder="Area pincode" formControlName="areapincode" [(ngModel)]="areaPincode">
            </mat-form-field>
          </div>
          <div fxLayout="column" fxLayoutAlign="space-around center">
            <mat-form-field *ngIf="isNew" class="">
              <input matInput placeholder="Area Name" formControlName="areatypenamenew">
            </mat-form-field>
            <mat-form-field *ngIf="isNew" class="">
              <input matInput placeholder="Area pincode" formControlName="areapincodenew">
            </mat-form-field>
          </div>
        </div>
        <div fxLayout="row" fxLayoutGap="30px">
          <div>
            <button mat-button *ngIf="isEdit" (click)="updateAreaService()">Update</button>
          </div>
          <div>
            <button mat-button *ngIf="isEdit" (click)="deletearea()">Delete</button>
          </div>
          <div>
            <button mat-button *ngIf="isNew" [disabled]="areaForm.invalid" (click)="createNewArea()">Create</button>
          </div>
        </div>
      </form>
      <div fxLayout="column" fxLayoutAlign="end end">
        <button mat-button *ngIf="isCancel" (click)="backToSelect()">Go Back</button>
      </div>
    </div>
  </div>
</div>
