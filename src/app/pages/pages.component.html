<ng4-loading-spinner></ng4-loading-spinner>
<div fxLayout="column">
  <!-- === Buttons ==== -->
  <div class="addview-buttons">
    <button mat-raised-button color="primary" (click)="viewPagesGrid()">
      <i class="fa fa-th"></i>
      <i class="fa fa-spinner fa-spin fa-fw" *ngIf="loading"></i>
    </button>
    <button mat-raised-button color="primary" (click)="viewPages()">
        <i class="fa fa-th-list"></i>
      <i class="fa fa-spinner fa-spin fa-fw" *ngIf="loading"></i>
    </button>
    <button class="text-uppercase btn-addpage" mat-raised-button color="primary" (click)="addPages()">Create Page +</button>
  </div>
  <!-- <i class="fa fa-spinner fa-spin fa-fw" *ngIf="loading"></i> -->

  <!-- ===== Add Pages ======= -->
  <div *ngIf="isAddPage" class="add-pages">
    <ngx-alerts maxMessages="3" timeout="5000">
      <!-- <strong>{{successMessage }}</strong> -->
    </ngx-alerts>
    <form [formGroup]="form" (submit)="onSubmit(form.value)">

      <!-- <div class="form-group" fxLayout="row">
        <label fxFlex="20" for="component_name">Page Title</label>
        <input fxFlex type="text" class="form-control" id="component_name" placeholder="Page title" formControlName="component_name">
      </div>
      <div class="form-group" fxLayout="row">
        <label fxFlex="20" for="component_parent">Page Parent</label>
        <select fxFlex formControlName="component_parent" id="component_parent">
          <option *ngFor="let parent of pageDetails" [value]="parent.id">
            {{parent.id}}-{{parent.component_name}}

          </option>
        </select>
      </div>
      <div class="form-group" fxLayout="row">
        <label fxFlex="20" for="component_description">Page Description</label>
        <ck-editor fxFlex name="editor1" formControlName="component_description" skin="moono-lisa" lang="en" [fullPage]="true"></ck-editor>
       
      </div>

      <div class="form-group" fxLayout="row">
        <label fxFlex="20" for="component_order">Page order</label>
        <input fxFlex type="text" class="form-control" id="component_order" placeholder="Page Order" formControlName="component_order">
      </div>
      <div class="form-group" fxLayout="row">
        <label fxFlex="20" for="component_menu_name">Page Menu Title</label>
        <input  fxFlex type="text" class="form-control" id="component_menu_name" placeholder="page menu title" formControlName="component_menu_name">
      </div>
      <div class="form-group" fxLayout="row">
        <label fxFlex="20" for="component_background_color">Select background color of page</label>
        <input fxFlex [cpOKButton]="true" (colorPickerChange)="form.get('component_background_color').setValue($event)" [(colorPicker)]="color"
          formControlName="component_background_color" id="component_background_color" [style.background]="color" [cpPresetColors]="['#fff', '#000', '#2889e9', '#e920e9', '#fff500', 'rgb(236,64,64)']"
        />
      </div> -->
      <div class="form-group" fxLayout="row">
        <label fxFlex="20" for="component_name">Page Title</label>
        <input fxFlex type="text" class="form-control" id="component_name" placeholder="page title" formControlName="component_name">
      </div>
      <div class="form-group" fxLayout="row">
        <label fxFlex="20" for="component_menu_name">Page Menu Title</label>
        <input fxFlex type="text" class="form-control" id="component_menuname" placeholder="page menu title" formControlName="component_menuname">
      </div>
      <div class="form-group" fxLayout="row">
        <label fxFlex="20" for="component_parent">Page Parent</label>
        <select fxFlex formControlName="component_parent" id="component_parent">
          <option *ngFor="let parent of parentPageDetails" [value]="parent.id">
            {{parent.id}}-{{parent.component_name}}

          </option>
        </select>
      </div>

      <div class="form-group" fxLayout="row">
        <label fxFlex="20" for="component_description">Web Description</label>
        <ck-editor fxFlex name="editor1" formControlName="component_description" skin="moono-lisa" lang="en" [fullPage]="true"></ck-editor>
        <!-- <input type="text" class="form-control" id="component_description" placeholder="Page Description" formControlName="component_description"> -->
      </div>

      <div class="form-group" fxLayout="row">
        <label fxFlex="20" for="component_description">App Description</label>
        <ck-editor fxFlex name="editor1" skin="moono-lisa" lang="en" [fullPage]="true"></ck-editor>
        <!-- <input type="text" class="form-control" id="component_description" placeholder="Page Description" formControlName="component_description"> -->
      </div>

      <div class="form-group" fxLayout="row">
        <label fxFlex="20" for="component_background_color">Select background color of page</label>
        <input fxFlex="30" [cpOKButton]="true" (colorPickerChange)="form.get('component_background_color').setValue($event)" [(colorPicker)]="color"
          formControlName="component_background_color" id="component_background_color" [style.background]="color" [cpPresetColors]="['#fff', '#000', '#2889e9', '#e920e9', '#fff500', 'rgb(236,64,64)']"
        />
      </div>
      <div class="form-group" fxLayout="row">
        <label fxFlex="20" for="component_order">Page order</label>
        <input fxFlex="20" type="text" class="form-control" id="component_order" placeholder="Page Order" formControlName="component_order">
      </div>

      <div class="form-group" fxLayout="row">
        <label fxFlex="20" for="component_image">Choose component image</label>
        <input type="file" id="component_image" (change)="onComponentImageChange($event)" #fileInput>
        <button type="button" class="btn btn-sm btn-default" (click)="clearFile()">clear file</button>
      </div>
      <div class="form-group" fxLayout="row">
        <label fxFlex="20" for="component_background_image">Choose component background image</label>
        <input type="file" id="component_background_image" (change)="onComponentBackgroundImageChange($event)" #fileInput>
        <button type="button" class="btn btn-sm btn-default" (click)="clearFile()">clear file</button>
      </div>

      <button type="submit" [disabled]="form.invalid || loading" mat-raised-button color="primary">{{button_text}}
        <i class="fa fa-spinner fa-spin fa-fw" *ngIf="loading"></i>
      </button>

    </form>
  </div>
  <!-- // ===== Add Pages End ======= -->
  <!-- ====== Pages Table ======= -->
  <div *ngIf="isTableView">
    <div>
      <table class="table table-bordered table-hover">
        <thead>
          <tr>
            <!-- <th scope="col">Page Id</th> -->
            <th scope="col">Page Name</th>
            <!-- <th scope="col">Page Description </th> -->
            <th scope="col">Page Image</th>
            <th scope="col">Page bg Image</th>
            <th scope="col">Page Order</th>
            <th scope="col">Page parent id</th>
            <th scope="col">Edit</th>
            <th scope="col">Delete</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let page_item of pageDetails">

            <!-- <th scope="row">{{page_item.id}}</th> -->
            <td>{{page_item.component_name}}</td>
            <!-- <td>{{page_item.component_description}}</td> -->
            <td>
              <span *ngIf="!page_item.component_image">no image</span>
              <img *ngIf="page_item.component_image" class="figure" src="data:image/png;base64,{{page_item.component_image}}">
            </td>
            <td>
              <span *ngIf="!page_item.component_background_image">no image</span>
              <img *ngIf="page_item.component_background_image" class="figure" src="data:image/png;base64,{{page_item.component_background_image}}">
            </td>
            <td>{{page_item.component_order}}</td>
            <td>{{page_item.parent_id}}</td>

            <td>
              <button (click)="editCompnent(page_item)" class="btn btn-success">EDIT</button>
            </td>
            <td>
              <button (click)="onDelete(page_item)" class="btn btn-success">DELETE</button>
            </td>
          </tr>

        </tbody>
      </table>
      <br/>
    </div>
  </div>
  <!-- // ====== Pages Table End ======= -->


  <!-- =========grid view====== -->

  <div *ngIf="isGridView" >
    <div class="row">
      <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12" *ngFor="let page_item of pageDetails">
        <mat-card  class="example-card">
            <div id="pageview">
                <!-- <img src=""  alt="pagescreen"/> -->
                <!-- <img mat-card-image src="data:image/png;base64,{{page_item.component_image}}" alt="Photo of a Shiba Inu"> -->
              </div>
            <mat-card-content>
              <div id="pageheader">
                <div class="edit-title">
                  <h6 fxFlex="50%" id="page-title">{{page_item.component_name}}</h6>
                  <i fxFlex="50%" fxLayoutAlign="end center" class="fa fa-pencil pull-right"></i>
                </div>
              </div>
            </mat-card-content>
            <mat-card-actions>
                <div class="button-row">
                  <div clsss="button-stack">
                    <button mat-mini-fab color="primary"></button>
                    <button mat-mini-fab color="accent"></button>
                    <button mat-mini-fab color="warn"></button>
                    <a color="blue">+2 more</a>
                    <a class="pull-right"><i class="fa fa-clock-o"></i></a>
                  </div>
                </div>
            </mat-card-actions>
          </mat-card><br><br>
      </div>
    </div>
    </div>
  <!-- // =========grid view End====== -->


</div>